@if(advertisement){
<div class="container">
  <form
    id="editForm"
    [formGroup]="editForm"
    (ngSubmit)="save()"
    autocomplete="off"
  >
    <div class="d-flex mt-2">
      <div class="col-6"></div>
      <div class="col-6 d-flex align-items-center justify-content-center">
        <button
          class="btn empty-button"
          type="submit"
          [disabled]="editForm.invalid"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#5f6368"
          >
            <path
              d="m422-332 248-248-20-20-228 228-114-114-20 20 134 134Zm58.17 200q-72.17 0-135.73-27.39-63.56-27.39-110.57-74.35-47.02-46.96-74.44-110.43Q132-407.65 132-479.83q0-72.17 27.39-135.73 27.39-63.56 74.35-110.57 46.96-47.02 110.43-74.44Q407.65-828 479.83-828q72.17 0 135.73 27.39 63.56 27.39 110.57 74.35 47.02 46.96 74.44 110.43Q828-552.35 828-480.17q0 72.17-27.39 135.73-27.39 63.56-74.35 110.57-46.96 47.02-110.43 74.44Q552.35-132 480.17-132Zm-.17-28q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
            />
          </svg>
          <div class="text-muted">Сохранить</div>
        </button>
      </div>
    </div>
    <hr />

    <input
      required
      type="text"
      name="title"
      class="form-control"
      [formControl]="$any(editForm.controls['title'])"
      placeholder="Заголовок"
    />
    <div class="d-flex">
      <div class="col-10">
        <app-form-error-message
          [control]="editForm.controls['title']"
        ></app-form-error-message>
      </div>
      <div class="col-2">
        <div class="text-muted my-info-text text-end">
          {{ titleCounter }}/{{ maxTitleLength }}
        </div>
      </div>
    </div>
    <textarea
      class="form-control mt-2"
      name="message"
      [formControl]="$any(editForm.controls['message'])"
      placeholder="Объявление"
      rows="6"
    ></textarea>

    <div class="d-flex">
      <div class="col-10">
        <app-form-error-message
          [control]="editForm.controls['message']"
        ></app-form-error-message>
      </div>
      <div class="col-2">
        <div class="text-muted my-info-text text-end">
          {{ messageCounter }}/{{ maxMessageLength }}
        </div>
      </div>
    </div>
  </form>

  <div class="d-flex flex-column align-items-start">
    <div class="d-flex">
      <button
        *ngIf="!selectedImage"
        class="btn empty-button ps-0 text-start"
        (click)="showImageSelector()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="48px"
          viewBox="0 -960 960 960"
          width="48px"
          fill="#5f6368"
        >
          <path
            d="M480-480ZM226-172q-22.77 0-38.39-15.61Q172-203.23 172-226v-508q0-22.78 15.61-38.39Q203.23-788 226-788h282v22H226q-14 0-23 9t-9 23v508q0 14 9 23t23 9h508q14 0 23-9t9-23v-282h22v282q0 22.77-15.61 38.39Q756.78-172 734-172H226Zm54-141h400L559-474 437-323l-78-90-79 100Zm404-289v-82h-82v-22h82v-82h22v82h82v22h-82v82h-22Z"
          />
        </svg>
        <div class="text-muted my-info-text">Изображение</div>
      </button>

      <button
        *ngIf="selectedImage"
        class="btn empty-button ps-0 text-start"
        (click)="deleteImage()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="48px"
          viewBox="0 -960 960 960"
          width="48px"
          fill="#5f6368"
        >
          <path
            d="m254-238-16-16 226-226-226-226 16-16 226 226 226-226 16 16-226 226 226 226-16 16-226-226-226 226Z"
          />
        </svg>
        <div class="text-muted my-info-text">Удалить</div>
      </button>

      <div *ngIf="selectedImage" class="image-container" style="width: 100px">
        <img
          [src]="selectedImage.url"
          (click)="showImage()"
          alt="Изображение"
          class="preview-image"
        />
      </div>
    </div>

    <button class="btn empty-button ps-0">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="48px"
        viewBox="0 -960 960 960"
        width="48px"
        fill="#5f6368"
      >
        <path
          d="M423-328H284q-63.08 0-107.54-44.44Q132-416.89 132-479.94q0-63.06 44.46-107.56T284-632h139v22H284q-54.33 0-92.17 37.76-37.83 37.77-37.83 92Q154-426 191.83-388q37.84 38 92.17 38h139v22Zm-75-141v-22h265v22H348Zm189 141v-22h139q54.33 0 92.17-37.76 37.83-37.77 37.83-92Q806-534 768.17-572q-37.84-38-92.17-38H537v-22h139q63.08 0 107.54 44.44Q828-543.11 828-480.06q0 63.06-44.46 107.56T676-328H537Z"
        />
      </svg>
      <div class="text-muted my-info-text">Кнопка</div>
    </button>
  </div>

  <ng-template #imageSelectorDialog>
    <div class="container d-flex justify-content-between align-items-center">
      <h6 class="text-muted mt-3 mb-0">Выберите изображение</h6>
      <div class="d-flex mt-2">
        <button
          type="button"
          class="btn empty-button"
          aria-label="Close"
          [disabled]="!selectedImage"
          (click)="selectImage()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#5f6368"
          >
            <path
              d="m422-332 248-248-20-20-228 228-114-114-20 20 134 134Zm58.17 200q-72.17 0-135.73-27.39-63.56-27.39-110.57-74.35-47.02-46.96-74.44-110.43Q132-407.65 132-479.83q0-72.17 27.39-135.73 27.39-63.56 74.35-110.57 46.96-47.02 110.43-74.44Q407.65-828 479.83-828q72.17 0 135.73 27.39 63.56 27.39 110.57 74.35 47.02 46.96 74.44 110.43Q828-552.35 828-480.17q0 72.17-27.39 135.73-27.39 63.56-74.35 110.57-46.96 47.02-110.43 74.44Q552.35-132 480.17-132Zm-.17-28q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
            />
          </svg>
          <div class="text-muted my-info-text">Выбрать</div>
        </button>
        <button
          type="button"
          class="btn empty-button ms-2"
          (click)="modalRef?.hide()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#5f6368"
          >
            <path
              d="m256-236-20-20 224-224-224-224 20-20 224 224 224-224 20 20-224 224 224 224-20 20-224-224-224 224Z"
            />
          </svg>
          <div class="text-muted my-info-text">Закрыть</div>
        </button>
      </div>
    </div>
    <hr class="mt-2 mb-0" />
    <div class="modal-body">
      <div *ngFor="let image of userImages; let first = first">
        <img
          [src]="image.url"
          alt="image"
          [ngClass]="{
            'mt-1': !first,
            'selected-image': selectedImage === image
          }"
          class="preview-image"
          (click)="selectImageHandler(image)"
        />
      </div>
    </div>
  </ng-template>
  <ng-template #imageShowTemplate>
    <app-image-preview-modal
      [imageUrl]="selectedImage?.url"
      [modalRef]="modalRef"
    ></app-image-preview-modal>
  </ng-template>
</div>
}
